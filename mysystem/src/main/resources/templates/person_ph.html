<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" question="IE=edge">
    <meta name="viewport" question="width=device-width, initial-scale=1">
    <!-- mobile metas -->
    <meta name="viewport" question="width=device-width, initial-scale=1">
    <meta name="viewport" question="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>I-Community</title>
    <meta name="keywords" question="">
    <meta name="description" question="">
    <meta name="author" question="">

    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.css}">
    <!-- style css -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
    <!-- Responsive-->
    <link rel="stylesheet" th:href="@{/css/responsive.css}">
    <!-- fevicon -->
    <link rel="icon" href="images/fevicon.png" type="image/gif" th:href="@{/images/fevicon.png}">
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css" th:href="@{/css/jquery.mCustomScrollbar.min.css}">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <!-- owl stylesheets -->
    <link rel="stylesheet" href="css/owl.carousel.min.css" th:href="@{/css/owl.carousel.min.css}">
    <link rel="stylesheet" href="css/owl.theme.default.min.css" th:href="@{/css/owl.theme.default.min.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">

    <!--    表单样式-->
    <link href="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/bootstrap-validator/0.5.3/css/bootstrapValidator.min.css" rel="stylesheet" />
    <!--图片上传-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
    <style type="text/css">
        .ph{
            margin-left:35%
        }
    </style>
</head>
<body>
<!--header section start -->
<div class="header_section header_bg">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="logo">
            <a href="index.html" th:href="@{/index.html}">
                <img src="images/logo.png" th:src="@{/images/logo.png}">
            </a>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/index.html}">首页</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/services.html}">服务</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/content}">社区论坛</a>

                </li>

                <li class="nav-item">
                    <a class="nav-link" th:href="@{/team.html}">社区居委会成员</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/contact.html}">意见反馈</a>
                </li>
                <li class="nav-item" th:if="${session.isT} ne 'y'">
                    <a class="nav-link" th:href="@{/login.html}" >登录/注册</a>
                </li>
                <li class="nav-item" th:if="${session.isT} eq 'y'">

                    <!--                <span th:text="${session.loginuser}"></span>-->
                    <!--                <span>欢迎你！</span>-->
                    <!--                <a class="nav-link" href="#" th:href="@{/xx}" >退出登录</a>-->
                    <a class="nav-link" href="#" th:href="@{/person.html}" >个人中心</a>
                </li>
            </ul>
        </div>
    </nav>
</div>
<div class="what_we_do_section layout_padding">
    <div class="container">
        <h1 class="what_taital">个人中心</h1>
        <!--        信息导航标签-->
        <div class="btn-group btn-group-justified" role="group" aria-label="...">
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-primary" th:onclick="window.location='/person.html'">
                    基础信息修改
                </button>
            </div>
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-info" th:onclick="window.location='/person_ph.html'">
                    修改头像
                </button>
            </div>
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-warning" th:onclick="window.location='/person_password.html'">
                    修改密码
                </button>
            </div>
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-danger" th:onclick="window.location='/xx'" >
                    退出登录
                    <!--                    <a th:href="@{/xx}" style="text-decoration:none;">退出登录</a>-->
                </button>
            </div>
        </div>

        <p class="what_text">修改头像</p>
        <div class="what_we_do_section_2">

            
            <form autocomplete="off" id="infoForm" enctype="multipart/form-data" method="post" action="/changePh">

                <div class="form-group">
                    <img th:src="${session.loginuser.url}" class="img-circle ph" width="25%" height="25%" />
                </div>
                <div class="form-group">
                    <label>头像</label>
                    <input id="pic" name="file" type="file" class="form-control" />
                </div>


                <div class="form-group">
                    <button type="submit" class="btn btn-primary">提交</button>
                    <button type="button" id="reset" name="reset" class="btn btn-primary">重置</button>
                </div>

            </form>

        </div>
    </div>
</div>
<!--header section end -->
<!-- contact section start -->

<!-- contact section end -->
<!--footer section start -->
<!--    <div class="footer_section layout_padding">-->
<!--      <div class="container">-->
<!--        <div class="copyright_section">-->
<!--          xxxxxxxxxx-->
<!--        </div>-->
<!--        &lt;!&ndash; copyright section end &ndash;&gt;-->
<!--      </div>-->
<!--    </div>-->
<!--footer section end -->
<!-- Javascript files-->
<script src="js/jquery.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/jquery-3.0.0.min.js"></script>
<script src="js/plugin.js"></script>
<!-- sidebar -->
<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/custom.js"></script>
<!-- javascript -->
<script src="js/owl.carousel.js"></script>
<!--样式-->
<script src="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap-validator/0.5.3/js/bootstrapValidator.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
<!--图片上传-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/plugins/piexif.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/plugins/sortable.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/plugins/purify.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/fileinput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/themes/fa/theme.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/locales/(lang).js"></script>
<script>
        $('#infoForm').bootstrapValidator({
            message: 'This value is not valid',
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
            }
        });


        var bootstrapValidator = $('#infoForm').data('bootstrapValidator');

        // 提交时验证
            bootstrapValidator.on('success.form.bv', function (e) {
             e.preventDefault();
             $('#infoForm').submit();
                //提交逻辑
        });

        // 重置表单
        $('#reset').on('click', function () {
            bootstrapValidator.resetForm();
            $('input').val('')
        })

</script>
<script>
            // 图上传与预览相关控制
            $('#pic').fileinput
            (
                {
                    showUpload : false, //是否显示上传按钮,跟随文本框的那个

                    showRemove : false, //显示移除按钮,跟随文本框的那个

                    showCaption : true,//是否显示标题,就是那个文本框

                    showPreview : true, //是否显示预览,不写默认为true

                    dropZoneEnabled : false,//是否显示拖拽区域，默认不写为true，但是会占用很大区域

                    //minImageWidth: 50, //图片的最小宽度

                    //minImageHeight: 50,//图片的最小高度

                    //maxImageWidth: 1000,//图片的最大宽度

                    //maxImageHeight: 1000,//图片的最大高度

                    //maxFileSize: 0, //文件最大大小，单位为kb，如果为0表示不限制文件大小

                    //minFileCount: 0, //文件最小大学， 单位为kb，如果为0表示不限制文件大小

                    maxFileCount : 1, //表示允许同时上传的最大文件个数

                    enctype : 'multipart/form-data',

                    validateInitialCount : true,

                    previewFileIcon : "<i class='glyphicon glyphicon-king'></i>",

                    allowedFileTypes : [ 'image' ],//配置允许文件上传的类型

                    allowedPreviewTypes : [ 'image' ],//配置所有的被预览文件类型

                    allowedPreviewMimeTypes : [ 'jpg', 'png', 'gif' ],//控制被预览的所有mime类型

                    language : 'zh'
                }
            )

            // 控制生成的代码的样式
            $('input.file-caption-name').attr('placeholder', '点击右方的选择图片按钮选择图片');
            $('span.hidden-xs').text("选择图片");
        </script>
</body>
</html>